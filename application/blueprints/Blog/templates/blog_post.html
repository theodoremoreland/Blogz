{% extends "base.html" %}
{% block content %}
<div class="blog-post">
  <h1 class="title">{{blog_post.title}}</h1>
  <p class="entry">{{blog_post.entry}}</p>
  <hr>
  <p class="author">
    written by <a href="/blog?user={{blog_post.author_id}}">{{blog_post.author.username}}</a>
    <span class="date">
      on {{blog_post.created_at.strftime("%B %d, %Y")}}
    </span>
  </p>
</div>
<section id="comment-section">
  <h2 class="sub-header">Leave a comment</h2>
  <form method='POST' id="post_comment_form" action="/comment?blog_post_id={{blog_post.id}}">
    <textarea name="comment" form="post_comment_form" rows="10" cols="21"
      placeholder="Enter your comment here"></textarea>
    <div class="row error">
      <span class="error">{{comment_error}}</span>
    </div>
    <button type="submit">Post comment</button>
  </form>
  <ul class="comments">
    {% for comment in comments %}
    <li class="comment">
      <p class="comment-body">{{comment.comment}}</p>
      <p class="comment-author">
        written by <a href="/blog?user={{comment.author_id}}">{{comment.author.username}}</a>
        <span class="date">
          on {{comment.created_at.strftime("%B %d, %Y")}}
        </span>
    </li>
    {% endfor %}
  </ul>
</section>
{% endblock %}